{"version":3,"sources":["Board.js"],"names":["cc","Class","extends","Component","properties","blackChess","default","type","Prefab","whiteChess","colWidth","onLoad","node","on","Node","EventType","MOUSE_UP","dropChess","bind","TOUCH_END","start","getPointPos","e","convertToNodeSpaceAR","getLocation","getDropPos","v2","x","y","Math","round","newChess","instantiate","addChild","setPosition"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAW;AACPC,qBAAS,IADF;AAEPC,kBAAMP,GAAGQ;AAFF,SADH;AAKRC,oBAAW;AACPH,qBAAS,IADF;AAEPC,kBAAMP,GAAGQ;AAFF,SALH;AASR;AACA;AACA;AACA;AACA;AACAE,kBAAU;AAdF,KAHP;;AAoBL;;AAEAC,UAtBK,oBAsBK;AACN,aAAKC,IAAL,CAAUC,EAAV,CAAab,GAAGc,IAAH,CAAQC,SAAR,CAAkBC,QAA/B,EAAyC,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAzC;AACA,aAAKN,IAAL,CAAUC,EAAV,CAAab,GAAGc,IAAH,CAAQC,SAAR,CAAkBI,SAA/B,EAA0C,KAAKF,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAA1C;AACH,KAzBI;AA2BLE,SA3BK,mBA2BI,CAER,CA7BI;;;AA+BL;;AAEA;AACAC,eAlCK,uBAkCOC,CAlCP,EAkCS;AACV,eAAO,KAAKV,IAAL,CAAUW,oBAAV,CAA+BD,EAAEE,WAAF,EAA/B,CAAP;AACH,KApCI;;;AAsCL;AACAC,cAvCK,sBAuCMC,EAvCN,EAuCS;AACV,YAAMhB,WAAW,KAAKA,QAAtB;AADU,YAELiB,CAFK,GAEGD,EAFH,CAELC,CAFK;AAAA,YAEFC,CAFE,GAEGF,EAFH,CAEFE,CAFE;;AAGVD,YAAIE,KAAKC,KAAL,CAAWH,IAAIjB,QAAf,IAA2BA,QAA/B;AACAkB,YAAIC,KAAKC,KAAL,CAAWF,IAAIlB,QAAf,IAA2BA,QAA/B;AACA,eAAOV,GAAG0B,EAAH,CAAMC,CAAN,EAASC,CAAT,CAAP;AACH,KA7CI;AA+CLX,aA/CK,qBA+CKK,CA/CL,EA+CO;AACR,YAAII,KAAK,KAAKL,WAAL,CAAiBC,CAAjB,CAAT;AACAI,aAAK,KAAKD,UAAL,CAAgBC,EAAhB,CAAL;AACA;AACA,YAAIK,WAAW/B,GAAGgC,WAAH,CAAe,KAAK3B,UAApB,CAAf;AACA,aAAKO,IAAL,CAAUqB,QAAV,CAAmBF,QAAnB;AACAA,iBAASG,WAAT,CAAqBR,EAArB;AACH;AAtDI,CAAT","file":"Board.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        blackChess:{\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        whiteChess:{\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 素材宽535，视窗宽720，ration = 720 / 535\r\n        // ratio: 1.3458,\r\n        // 素材单元格宽35\r\n        // originColWidth: 35,\r\n        // colWidth = originColWidth * ratio\r\n        colWidth: 47.1\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.node.on(cc.Node.EventType.MOUSE_UP, this.dropChess.bind(this));\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.dropChess.bind(this));\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n\r\n    // 相对棋盘中心坐标，v2\r\n    getPointPos(e){\r\n        return this.node.convertToNodeSpaceAR(e.getLocation())\r\n    },\r\n\r\n    // 获取落子坐标\r\n    getDropPos(v2){\r\n        const colWidth = this.colWidth\r\n        let {x, y} = v2\r\n        x = Math.round(x / colWidth) * colWidth\r\n        y = Math.round(y / colWidth) * colWidth\r\n        return cc.v2(x, y)\r\n    },\r\n\r\n    dropChess(e){\r\n        let v2 = this.getPointPos(e)\r\n        v2 = this.getDropPos(v2)\r\n        // console.log(v2)\r\n        var newChess = cc.instantiate(this.blackChess)\r\n        this.node.addChild(newChess)\r\n        newChess.setPosition(v2)\r\n    }\r\n});\r\n"]}