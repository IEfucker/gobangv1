{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\modules/assets\\scripts\\modules\\win.js"],"names":["isFive","board","p","role","len","length","count","reset","i","t","x","y","w","d","j","R","empty"],"mappings":"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","file":"win.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\modules","sourcesContent":["/* eslint-disable no-constant-condition */\r\nimport R from './role.js'\r\nvar isFive = function (board, p, role) {\r\n  var len = board.length\r\n  var count = 1\r\n\r\n  var reset = function () {\r\n    count = 1\r\n  }\r\n\r\n  for (let i = p[1] + 1; true; i++) {\r\n    if (i >= len) break\r\n    const t = board[p[0]][i]\r\n    if (t !== role) break\r\n    count++\r\n  }\r\n\r\n  for (let i = p[1] - 1; true; i--) {\r\n    if (i < 0) break\r\n    const t = board[p[0]][i]\r\n    if (t !== role) break\r\n    count++\r\n  }\r\n\r\n  if (count >= 5) return 1\r\n\r\n  // 纵向\r\n  reset()\r\n\r\n  for (var i = p[0] + 1; true; i++) {\r\n    if (i >= len) {\r\n      break\r\n    }\r\n    var t = board[i][p[1]]\r\n    if (t !== role) break\r\n    count++\r\n  }\r\n\r\n  for (let i = p[0] - 1; true; i--) {\r\n    if (i < 0) {\r\n      break\r\n    }\r\n    const t = board[i][p[1]]\r\n    if (t !== role) break\r\n    count++\r\n  }\r\n\r\n  if (count >= 5) return 2\r\n  // \\\\\r\n  reset()\r\n\r\n  for (let i = 1; true; i++) {\r\n    const x = p[0] + i; const y = p[1] + i\r\n    if (x >= len || y >= len) {\r\n      break\r\n    }\r\n    const t = board[x][y]\r\n    if (t !== role) break\r\n\r\n    count++\r\n  }\r\n\r\n  for (let i = 1; true; i++) {\r\n    const x = p[0] - i; const y = p[1] - i\r\n    if (x < 0 || y < 0) {\r\n      break\r\n    }\r\n    const t = board[x][y]\r\n    if (t !== role) break\r\n    count++\r\n  }\r\n\r\n  if (count >= 5) return 3\r\n\r\n  // \\/\r\n  reset()\r\n\r\n  for (let i = 1; true; i++) {\r\n    const x = p[0] + i; const y = p[1] - i\r\n    if (x < 0 || y < 0 || x >= len || y >= len) {\r\n      break\r\n    }\r\n    const t = board[x][y]\r\n    if (t !== role) break\r\n    count++\r\n  }\r\n\r\n  for (let i = 1; true; i++) {\r\n    const x = p[0] - i; const y = p[1] + i\r\n    if (x < 0 || y < 0 || x >= len || y >= len) {\r\n      break\r\n    }\r\n    const t = board[x][y]\r\n    if (t !== role) break\r\n    count++\r\n  }\r\n\r\n  if (count >= 5) return 4\r\n\r\n  return 0\r\n}\r\n\r\nvar w = function (board) {\r\n  var p; var d = 0\r\n  for (var i = 0; i < board.length && !d; i++) {\r\n    for (var j = 0; j < board[i].length && !d; j++) {\r\n      var t = board[i][j]\r\n      p = [i, j]\r\n      if (t !== R.empty) {\r\n        d = isFive(board, [i, j], t)\r\n        if (d) break\r\n      }\r\n    }\r\n  }\r\n\r\n  if (!d) return false\r\n  if (d === 1) {\r\n    return [\r\n      p,\r\n      [p[0], p[1] + 1],\r\n      [p[0], p[1] + 2],\r\n      [p[0], p[1] + 3],\r\n      [p[0], p[1] + 4]\r\n    ]\r\n  }\r\n  if (d === 2) {\r\n    return [\r\n      p,\r\n      [p[0] + 1, p[1]],\r\n      [p[0] + 2, p[1]],\r\n      [p[0] + 3, p[1]],\r\n      [p[0] + 4, p[1]]\r\n    ]\r\n  }\r\n  if (d === 3) {\r\n    return [\r\n      p,\r\n      [p[0] + 1, p[1] + 1],\r\n      [p[0] + 2, p[1] + 2],\r\n      [p[0] + 3, p[1] + 3],\r\n      [p[0] + 4, p[1] + 4]\r\n    ]\r\n  }\r\n  if (d === 4) {\r\n    return [\r\n      p,\r\n      [p[0] + 1, p[1] - 1],\r\n      [p[0] + 2, p[1] - 2],\r\n      [p[0] + 3, p[1] - 3],\r\n      [p[0] + 4, p[1] - 4]\r\n    ]\r\n  }\r\n}\r\n\r\nexport default w\r\n"]}